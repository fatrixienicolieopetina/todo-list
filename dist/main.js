(()=>{"use strict";const e=()=>Math.floor(Math.random()*Math.floor(Math.random()*Date.now())),t=(()=>{const t={id:e(),projectName:"Home",description:"Read about The Odin Project curriculum",title:"Check out TOP",duedate:(new Date).toLocaleString().split(/\D/).slice(0,3).map((e=>e.padStart(2,"0"))).join("/"),priority:"Low"},n={id:e(),projectName:"Special Project"};let o;return o=window.localStorage,null==o.getItem("projects")&&o.setItem("projects",JSON.stringify(new Array(n))),null==o.getItem("todos")&&o.setItem("todos",JSON.stringify(new Array(t))),{addNewToDoToStorage:function(e){let t=JSON.parse(o.getItem("todos")||"[]");t.push(e),o.setItem("todos",JSON.stringify(t))},addNewProjectToStorage:function(e){let t=JSON.parse(o.getItem("projects")||"[]");t.push(e),o.setItem("projects",JSON.stringify(t))},getProjectItems:function(){return JSON.parse(o.getItem("projects"))},getTodoItemsOfAProject:function(e){return JSON.parse(o.getItem("todos")).filter((t=>t.projectName==e))},getTodoItemById:function(e){let t=JSON.parse(o.getItem("todos")).filter((t=>t.id==e));return 1==t.length?t[0]:null},deleteTodo:function(e){let t=JSON.parse(o.getItem("todos")).filter((t=>t.id!=e));o.setItem("todos",JSON.stringify(t))},deleteProject:function(e){let t=JSON.parse(o.getItem("projects")),n=JSON.parse(o.getItem("todos")),c=t.filter((t=>t.id==e)),d=t.filter((t=>t.id!=e)),i=n.filter((e=>e.projectName!=c[0].projectName));o.setItem("todos",JSON.stringify(i)),o.setItem("projects",JSON.stringify(d))}}})(),n=function(){class n{constructor(e){this.projectName=e.projectName,this.id=e.id}}return{createNewProject:function(o){let c={projectName:o,id:e()};t.addNewProjectToStorage(new n(c))},getProjects:function(){return t.getProjectItems()},deleteProject:function(e){t.deleteProject(e)}}}(),o=(()=>{function e(){document.getElementById("parent-todo-container").textContent=""}return{removeActiveClass:function(e){document.getElementById(e).classList.remove("is-active")},resetDisplay:function(){let t=document.getElementById("project-list"),n=document.getElementById("project");t.textContent="",n.textContent="",e()},resetTodoContainer:e,resetActiveProject:function(e){let t=document.getElementById("menu-list").getElementsByClassName("is-active");for(let e of t)e.classList.remove("is-active");e.classList.add("is-active")},closeDeleteModal:function(e){document.getElementById(e).classList.remove("is-active")},openDeleteModal:function(e){document.getElementById(e).classList.add("is-active")}}})(),c=(()=>{function e(e,t,n,c){e.addEventListener("click",(function(){o.resetTodoContainer(),c(t),o.resetActiveProject(n)}))}function t(){document.getElementById("new-project-modal").classList.add("is-active")}return{addNewProject:function(){let e=document.getElementById("project-name").value;n.createNewProject(e),o.removeActiveClass("new-project-modal")},addListenerToHomeProject:function(t){e(document.getElementById("home-project"),"Home",document.getElementById("home-project-anchor"),t)},addListenerToProjectItem:e,createProjectOption:function(e){let t=document.createElement("option");return t.innerText=e,t.value=e,t},createNewProject:t,addListenerToCreateProjectButton:function(){document.getElementById("create-new-project-btn").addEventListener("click",(function(){t()}))},deleteProject:function(e){n.deleteProject(e),o.closeDeleteModal("delete-project-modal")},addListenerToCloseDeleteProjectModal:function(){document.getElementById("delete-project-modal-cancel-btn").addEventListener("click",(function(){o.closeDeleteModal("delete-project-modal")}))},addListenerToCancelCreateNewProjectBtn:function(){document.getElementById("cancel-create-project").classList.remove("is-active")},getProjects:function(){return n.getProjects()}}})(),d=function(){class n{constructor(e){this.title=e.title,this.description=e.description,this.duedate=e.duedate,this.priority=e.priority,this.projectName=e.projectName,this.id=e.id}}return{createTodo:function(o,c,d,i,l){let s={projectName:o,title:c,description:d,duedate:i,priority:l,id:e()};t.addNewToDoToStorage(new n(s))},getTodosOfAProject:function(e){return t.getTodoItemsOfAProject(e)},getTodoDetails:function(e){return t.getTodoItemById(e)},deleteTodo:function(e){t.deleteTodo(e)}}}(),i=function(){let e=document.getElementById("title").value,t=document.getElementById("project").value,n=document.getElementById("details").value,c=document.getElementById("duedate").value,i=document.getElementsByClassName("priority-option"),l="";for(let e=0;e<i.length;e++)i[e].classList.contains("is-selected")&&(l=i[e].innerText);d.createTodo(t,e,n,c,l),o.removeActiveClass("new-todo-modal")},l=function(){document.getElementById("create-new-todo-btn").addEventListener("click",(function(){document.getElementById("new-todo-modal").classList.add("is-active")}))},s=function(){document.getElementById("cancel-create-todo").classList.remove("is-active")},a=function(){let e=document.getElementsByClassName("priority-option"),t=e[0],n=e[1],o=e[2];t.addEventListener("click",(function(){t.classList.contains("is-selected")||t.classList.add("is-selected","is-success"),o.classList.remove("is-selected","is-warning"),n.classList.remove("is-selected","is-info")})),n.addEventListener("click",(function(){n.classList.contains("is-selected")||n.classList.add("is-selected","is-info"),o.classList.remove("is-selected","is-warning"),t.classList.remove("is-selected","is-success")})),o.addEventListener("click",(function(){o.classList.contains("is-selected")||o.classList.add("is-selected","is-warning"),t.classList.remove("is-selected","is-success"),n.classList.remove("is-selected","is-info")}))},r=function(e){d.deleteTodo(e),o.closeDeleteModal("delete-todo-modal")},m=function(){document.getElementById("delete-todo-modal-cancel-btn").addEventListener("click",(function(){o.closeDeleteModal("delete-todo-modal")}))},u=function(e){let t=document.getElementById("section-details");t.textContent="";let n=document.createElement("p");n.innerText=`Title: ${e.title}`;let o=document.createElement("p");o.innerText=`Details: ${e.description}`;let c=document.createElement("p");c.innerText=`Due Date: ${e.duedate}`;let d=document.createElement("p");d.innerText=`Priority: ${e.priority}`;let i=document.createElement("p");i.innerText=`Project Name: ${e.projectName}`,t.appendChild(n),t.appendChild(o),t.appendChild(c),t.appendChild(d),t.appendChild(i),document.getElementById("details-modal").classList.add("is-active")},p=function(){document.getElementById("detail-modal-close-btn").addEventListener("click",(function(){document.getElementById("details-modal").classList.remove("is-active"),document.getElementById("section-details").textContent=""}))},f=function(e){return d.getTodosOfAProject(e)},g=function(e){return d.getTodoDetails(e)},j=function(){function e(){i(),E()}function t(e){let t=f(e),c=document.getElementById("parent-todo-container");t.forEach((e=>{c.appendChild(function(e,t,c,d){let i=document.createElement("div");i.setAttribute("class","panel-block todo-item"),i.id=c,"High"==t?i.classList.add("todo-item-green"):"Normal"==t?i.classList.add("todo-item-blue"):"Low"==t&&i.classList.add("todo-item-yellow");let l=document.createElement("i");l.setAttribute("class","fa fa-check");let s=document.createElement("label"),a=document.createElement("span");a.className="title is-3",a.innerText=`  ${e}\n`;let r=document.createElement("span");r.innerText=`Due at ${d}`,s.appendChild(l),s.appendChild(a),s.appendChild(r);let m=document.createElement("div");m.setAttribute("class","field is-grouped add-button buttons are-small");let p=function(e){let t=document.createElement("button");t.className="button",t.setAttribute("type","button");let n=document.createElement("i");n.setAttribute("class","fa fa-eye"),t.appendChild(n);let o=g(e);return t.addEventListener("click",(function(){u(o)})),t}(c),f=function(e){let t=document.createElement("button");t.className="button",t.setAttribute("type","button");let c=document.createElement("i");return c.setAttribute("class","fa fa-trash"),t.appendChild(c),t.addEventListener("click",(function(){o.openDeleteModal("delete-todo-modal"),function(e){let t=document.getElementById("delete-todo-modal-btn");t.removeEventListener("click",(function(){n(e)})),t.addEventListener("click",(function(){n(e)}))}(e)})),t}(c);return m.appendChild(p),m.appendChild(f),i.appendChild(s),i.appendChild(m),i}(e.title,e.priority,e.id,e.duedate))}))}function n(e){r(e),E()}function d(){let e=c.getProjects(),n=document.getElementById("project-list"),d=document.getElementById("project");d.appendChild(c.createProjectOption("Home")),c.addListenerToHomeProject(t),e.forEach((e=>{n.appendChild(function(e){let n=document.createElement("li"),d=document.createElement("a"),i=document.createElement("div"),l=document.createElement("span");l.innerText=e.projectName;let s=document.createElement("span"),a=document.createElement("button");a.className="float-right",a.id=e.id;let r=document.createElement("i");return r.className="fa fa-trash",a.addEventListener("click",(function(){o.openDeleteModal("delete-project-modal"),function(e){let t=document.getElementById("delete-project-modal-btn");t.removeEventListener("click",(function(){j(e)})),t.addEventListener("click",(function(){j(e)}))}(e.id)})),a.appendChild(r),s.appendChild(a),i.appendChild(l),i.appendChild(s),d.appendChild(i),n.className="project",n.appendChild(d),c.addListenerToProjectItem(n,e.projectName,d,t),n}(e)),d.appendChild(c.createProjectOption(e.projectName))}))}function j(e){c.deleteProject(e),E()}function E(){o.resetDisplay(),d(),t("Home")}return{addListeners:function(){l(),c.addListenerToCreateProjectButton(),s(),c.addListenerToCancelCreateNewProjectBtn(),document.getElementById("submit-create-todo").addEventListener("click",e),E(),document.getElementById("submit-create-project").addEventListener("click",(function(){c.addNewProject(),E()})),E(),a(),p(),c.addListenerToCloseDeleteProjectModal(),m()},init:E}}();j.init(),j.addListeners()})();