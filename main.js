(()=>{"use strict";const e=(()=>{let e;return e=window.localStorage,null==e.getItem("projects")&&e.setItem("projects","[]"),null==e.getItem("todos")&&e.setItem("todos","[]"),{addNewToDoToStorage:function(t){let n=JSON.parse(e.getItem("todos")||"[]");n.push(t),e.setItem("todos",JSON.stringify(n))},addNewProjectToStorage:function(t){let n=JSON.parse(e.getItem("projects")||"[]");n.push(t),e.setItem("projects",JSON.stringify(n))},getProjectItems:function(){return JSON.parse(e.getItem("projects"))},getTodoItemsOfAProject:function(t){return JSON.parse(e.getItem("todos")).filter((e=>e.projectName==t))},getTodoItemById:function(t){let n=JSON.parse(e.getItem("todos")).filter((e=>e.id==t));return 1==n.length?n[0]:null}}})(),t=()=>Math.floor(Math.random()*Math.floor(Math.random()*Date.now())),n=function(){class n{constructor(e){this.title=e.title,this.description=e.description,this.duedate=e.duedate,this.priority=e.priority,this.projectName=e.projectName,this.id=e.id}}return{createTodo:function(o,c,i,s,d){let l={projectName:o,title:c,description:i,duedate:s,priority:d,id:t()};e.addNewToDoToStorage(new n(l))},getTodosOfAProject:function(t){return e.getTodoItemsOfAProject(t)},getTodoDetails:function(t){return e.getTodoItemById(t)}}}(),o=function(){class n{constructor(e){this.projectName=e.projectName,this.id=e.id}}return{createNewProject:function(o){let c={projectName:o,id:t()};e.addNewProjectToStorage(new n(c))},getProjects:function(){return e.getProjectItems()}}}(),c=function(){function e(){let e=document.getElementById("project-name").value;o.createNewProject(e),l("new-project-modal"),u()}function t(){let e=document.getElementById("title").value,t=document.getElementById("project").value,o=document.getElementById("details").value,c=document.getElementById("duedate").value,i=document.getElementsByClassName("priority-option"),s="";for(let e=0;e<i.length;e++)i[e].classList.contains("is-selected")&&(s=i[e].innerText);console.log(e,t,o,c,s),n.createTodo(t,e,o,c,s),l("new-todo-modal"),u()}function c(e){let t=document.createElement("option");return t.innerText=e,t.value=e,t}function i(e,t,n){e.addEventListener("click",(function(){m(),a(t),function(e){let t=document.getElementById("menu-list").getElementsByClassName("is-active");for(let e of t)e.classList.remove("is-active");e.classList.add("is-active"),console.log(e.classList)}(n)}))}function s(){document.getElementById("new-todo-modal").classList.add("is-active")}function d(){document.getElementById("new-project-modal").classList.add("is-active")}function l(e){document.getElementById(e).classList.remove("is-active")}function a(e){let t=n.getTodosOfAProject(e),o=document.getElementById("parent-todo-container");t.forEach((e=>{o.appendChild(function(e,t,o){let c=document.createElement("div");c.setAttribute("class","panel-block todo-item"),c.id=o,"High"==t?c.classList.add("todo-item-green"):"Normal"==t?c.classList.add("todo-item-blue"):"Low"==t&&c.classList.add("todo-item-yellow");let i=document.createElement("input");i.setAttribute("type","checkbox");let s=document.createElement("label"),d=document.createElement("span");d.innerText=e,s.appendChild(i),s.appendChild(d);let l=document.createElement("div");l.setAttribute("class","field is-grouped add-button buttons are-small");let a=function(e){let t=document.createElement("button");t.className="button",t.setAttribute("type","button");let o=document.createElement("i");o.setAttribute("class","fa fa-eye"),t.appendChild(o);let c=n.getTodoDetails(e);return t.addEventListener("click",(function(){!function(e){let t=document.getElementById("section-details");t.textContent="";let n=document.createElement("p");n.innerText=`Title: ${e.title}`;let o=document.createElement("p");o.innerText=`Details: ${e.description}`;let c=document.createElement("p");c.innerText=`Due Date: ${e.duedate}`;let i=document.createElement("p");i.innerText=`Priority: ${e.priority}`;let s=document.createElement("p");s.innerText=`Project Name: ${e.projectName}`,t.appendChild(n),t.appendChild(o),t.appendChild(c),t.appendChild(i),t.appendChild(s),console.log(e),document.getElementById("details-modal").classList.add("is-active")}(c)})),t}(o),m=r("fa fa-edit"),u=r("fa fa-trash");return l.appendChild(a),l.appendChild(m),l.appendChild(u),c.appendChild(s),c.appendChild(l),c}(e.title,e.priority,e.id))}))}function r(e){let t=document.createElement("button");t.className="button",t.setAttribute("type","button");let n=document.createElement("i");return n.setAttribute("class",e),t.appendChild(n),t}function m(){document.getElementById("parent-todo-container").textContent=""}function u(){!function(){let e=document.getElementById("project-list"),t=document.getElementById("project");e.textContent="",t.textContent="",m()}(),function(){let e=o.getProjects(),t=document.getElementById("project-list"),n=document.getElementById("project");n.appendChild(c("Home")),i(document.getElementById("home-project"),"Home",document.getElementById("home-project-anchor")),e.forEach((e=>{t.appendChild(function(e){let t=document.createElement("li"),n=document.createElement("a");return t.className="project",t.id=e.id,n.innerText=e.projectName,t.appendChild(n),i(t,e.projectName,n),t}(e)),n.appendChild(c(e.projectName))}))}(),a("Home")}return{addListeners:function(){document.getElementById("create-new-todo-btn").addEventListener("click",(function(){s()})),document.getElementById("create-new-project-btn").addEventListener("click",(function(){d()})),document.getElementById("cancel-create-todo").classList.remove("is-active"),document.getElementById("cancel-create-project").classList.remove("is-active"),document.getElementById("submit-create-todo").addEventListener("click",t),u(),document.getElementById("submit-create-project").addEventListener("click",e),u(),function(){let e=document.getElementsByClassName("priority-option"),t=e[0],n=e[1],o=e[2];t.addEventListener("click",(function(){t.classList.contains("is-selected")||t.classList.add("is-selected","is-success"),o.classList.remove("is-selected","is-warning"),n.classList.remove("is-selected","is-info")})),n.addEventListener("click",(function(){n.classList.contains("is-selected")||n.classList.add("is-selected","is-info"),o.classList.remove("is-selected","is-warning"),t.classList.remove("is-selected","is-success")})),o.addEventListener("click",(function(){o.classList.contains("is-selected")||o.classList.add("is-selected","is-warning"),t.classList.remove("is-selected","is-success"),n.classList.remove("is-selected","is-info")}))}(),document.getElementById("detail-modal-close-btn").addEventListener("click",(function(){document.getElementById("details-modal").classList.remove("is-active"),document.getElementById("section-details").textContent=""}))},init:u,createNewToDo:s,createNewProject:d}}();c.init(),c.addListeners()})();