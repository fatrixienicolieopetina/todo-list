(()=>{"use strict";const e=()=>Math.floor(Math.random()*Math.floor(Math.random()*Date.now())),t=(()=>{const t={id:e(),projectName:"Home",description:"Read about The Odin Project curriculum",title:"Check out TOP",duedate:(new Date).toLocaleString().split(/\D/).slice(0,3).map((e=>e.padStart(2,"0"))).join("/"),priority:"Low"},n={id:e(),projectName:"Special Project"};let o;return o=window.localStorage,null==o.getItem("projects")&&o.setItem("projects",JSON.stringify(new Array(n))),null==o.getItem("todos")&&o.setItem("todos",JSON.stringify(new Array(t))),{addNewToDoToStorage:function(e){let t=JSON.parse(o.getItem("todos")||"[]");t.push(e),o.setItem("todos",JSON.stringify(t))},addNewProjectToStorage:function(e){let t=JSON.parse(o.getItem("projects")||"[]");t.push(e),o.setItem("projects",JSON.stringify(t))},getProjectItems:function(){return JSON.parse(o.getItem("projects"))},getTodoItemsOfAProject:function(e){return JSON.parse(o.getItem("todos")).filter((t=>t.projectName==e))},getTodoItemById:function(e){let t=JSON.parse(o.getItem("todos")).filter((t=>t.id==e));return 1==t.length?t[0]:null},deleteTodo:function(e){let t=JSON.parse(o.getItem("todos")).filter((t=>t.id!=e));o.setItem("todos",JSON.stringify(t))},deleteProject:function(e){let t=JSON.parse(o.getItem("projects")),n=JSON.parse(o.getItem("todos")),c=t.filter((t=>t.id==e)),i=t.filter((t=>t.id!=e)),d=n.filter((e=>e.projectName!=c[0].projectName));o.setItem("todos",JSON.stringify(d)),o.setItem("projects",JSON.stringify(i))}}})(),n=function(){class n{constructor(e){this.title=e.title,this.description=e.description,this.duedate=e.duedate,this.priority=e.priority,this.projectName=e.projectName,this.id=e.id}}return{createTodo:function(o,c,i,d,s){let l={projectName:o,title:c,description:i,duedate:d,priority:s,id:e()};t.addNewToDoToStorage(new n(l))},getTodosOfAProject:function(e){return t.getTodoItemsOfAProject(e)},getTodoDetails:function(e){return t.getTodoItemById(e)},deleteTodo:function(e){t.deleteTodo(e)}}}(),o=function(){class n{constructor(e){this.projectName=e.projectName,this.id=e.id}}return{createNewProject:function(o){let c={projectName:o,id:e()};t.addNewProjectToStorage(new n(c))},getProjects:function(){return t.getProjectItems()},deleteProject:function(e){t.deleteProject(e)}}}(),c=function(){function e(){document.getElementById("project-name").value,l(),a("new-project-modal"),j()}function t(){let e=document.getElementById("title").value,t=document.getElementById("project").value,o=document.getElementById("details").value,c=document.getElementById("duedate").value,i=document.getElementsByClassName("priority-option"),d="";for(let e=0;e<i.length;e++)i[e].classList.contains("is-selected")&&(d=i[e].innerText);console.log(e,t,o,c,d),n.createTodo(t,e,o,c,d),a("new-todo-modal"),j()}function c(e){let t=document.createElement("option");return t.innerText=e,t.value=e,t}function i(e){let t=document.getElementById("menu-list").getElementsByClassName("is-active");for(let e of t)e.classList.remove("is-active");e.classList.add("is-active"),console.log(e.classList)}function d(e,t,n){e.addEventListener("click",(function(){E(),r(t),i(n)}))}function s(){document.getElementById("new-todo-modal").classList.add("is-active")}function l(){document.getElementById("new-project-modal").classList.add("is-active")}function a(e){document.getElementById(e).classList.remove("is-active")}function r(e){let t=n.getTodosOfAProject(e),o=document.getElementById("parent-todo-container");t.forEach((e=>{o.appendChild(function(e,t,o,c){let i=document.createElement("div");i.setAttribute("class","panel-block todo-item"),i.id=o,"High"==t?i.classList.add("todo-item-green"):"Normal"==t?i.classList.add("todo-item-blue"):"Low"==t&&i.classList.add("todo-item-yellow");let d=document.createElement("i");d.setAttribute("class","fa fa-check");let s=document.createElement("label"),l=document.createElement("span");l.className="title is-3",l.innerText=`  ${e}\n`;let a=document.createElement("span");a.innerText=`Due at ${c}`,s.appendChild(d),s.appendChild(l),s.appendChild(a);let r=document.createElement("div");r.setAttribute("class","field is-grouped add-button buttons are-small");let p=function(e){let t=document.createElement("button");t.className="button",t.setAttribute("type","button");let o=document.createElement("i");o.setAttribute("class","fa fa-eye"),t.appendChild(o);let c=n.getTodoDetails(e);return t.addEventListener("click",(function(){!function(e){let t=document.getElementById("section-details");t.textContent="";let n=document.createElement("p");n.innerText=`Title: ${e.title}`;let o=document.createElement("p");o.innerText=`Details: ${e.description}`;let c=document.createElement("p");c.innerText=`Due Date: ${e.duedate}`;let i=document.createElement("p");i.innerText=`Priority: ${e.priority}`;let d=document.createElement("p");d.innerText=`Project Name: ${e.projectName}`,t.appendChild(n),t.appendChild(o),t.appendChild(c),t.appendChild(i),t.appendChild(d),document.getElementById("details-modal").classList.add("is-active")}(c)})),t}(o),f=function(e){let t=document.createElement("button");t.className="button",t.setAttribute("type","button");let n=document.createElement("i");return n.setAttribute("class","fa fa-trash"),t.appendChild(n),t.addEventListener("click",(function(){m("delete-todo-modal"),function(e){let t=document.getElementById("delete-todo-modal-btn");t.removeEventListener("click",(function(){u(e)})),t.addEventListener("click",(function(){u(e)}))}(e)})),t}(o);return r.appendChild(p),r.appendChild(f),i.appendChild(s),i.appendChild(r),i}(e.title,e.priority,e.id,e.duedate))}))}function m(e){document.getElementById(e).classList.add("is-active")}function u(e){n.deleteTodo(e),f("delete-todo-modal"),j()}function p(e){o.deleteProject(e),f("delete-project-modal"),j()}function f(e){document.getElementById(e).classList.remove("is-active")}function e(){let e=document.getElementById("project-name").value;o.createNewProject(e),a("new-project-modal"),j()}function l(){document.getElementById("new-project-modal").classList.add("is-active")}function g(){let e=o.getProjects(),t=document.getElementById("project-list"),n=document.getElementById("project");n.appendChild(c("Home")),function(){let e=document.getElementById("home-project"),t=document.getElementById("home-project-anchor");d(e,"Home",t)}(),e.forEach((e=>{t.appendChild(function(e){let t=document.createElement("li"),n=document.createElement("a"),o=document.createElement("div"),c=document.createElement("span");c.innerText=e.projectName;let i=document.createElement("span"),s=document.createElement("button");s.className="float-right",s.id=e.id;let l=document.createElement("i");return l.className="fa fa-trash",s.addEventListener("click",(function(){m("delete-project-modal"),function(e){let t=document.getElementById("delete-project-modal-btn");t.removeEventListener("click",(function(){p(e)})),t.addEventListener("click",(function(){p(e)}))}(e.id)})),s.appendChild(l),i.appendChild(s),o.appendChild(c),o.appendChild(i),n.appendChild(o),t.className="project",t.appendChild(n),d(t,e.projectName,n),t}(e)),n.appendChild(c(e.projectName))}))}function c(e){let t=document.createElement("option");return t.innerText=e,t.value=e,t}function m(e){document.getElementById(e).classList.add("is-active")}function d(e,t,n){e.addEventListener("click",(function(){E(),r(t),i(n)}))}function p(e){o.deleteProject(e),f("delete-project-modal"),j()}function f(e){document.getElementById(e).classList.remove("is-active")}function E(){document.getElementById("parent-todo-container").textContent=""}function j(){!function(){let e=document.getElementById("project-list"),t=document.getElementById("project");e.textContent="",t.textContent="",E()}(),g(),r("Home")}return{addListeners:function(){document.getElementById("create-new-todo-btn").addEventListener("click",(function(){s()})),document.getElementById("create-new-project-btn").addEventListener("click",(function(){l()})),document.getElementById("cancel-create-todo").classList.remove("is-active"),document.getElementById("cancel-create-project").classList.remove("is-active"),document.getElementById("submit-create-todo").addEventListener("click",t),j(),document.getElementById("submit-create-project").addEventListener("click",e),j(),function(){let e=document.getElementsByClassName("priority-option"),t=e[0],n=e[1],o=e[2];t.addEventListener("click",(function(){t.classList.contains("is-selected")||t.classList.add("is-selected","is-success"),o.classList.remove("is-selected","is-warning"),n.classList.remove("is-selected","is-info")})),n.addEventListener("click",(function(){n.classList.contains("is-selected")||n.classList.add("is-selected","is-info"),o.classList.remove("is-selected","is-warning"),t.classList.remove("is-selected","is-success")})),o.addEventListener("click",(function(){o.classList.contains("is-selected")||o.classList.add("is-selected","is-warning"),t.classList.remove("is-selected","is-success"),n.classList.remove("is-selected","is-info")}))}(),document.getElementById("detail-modal-close-btn").addEventListener("click",(function(){document.getElementById("details-modal").classList.remove("is-active"),document.getElementById("section-details").textContent=""})),document.getElementById("delete-project-modal-cancel-btn").addEventListener("click",(function(){f("delete-project-modal")}))},init:j,createNewToDo:s,createNewProject:l}}();c.init(),c.addListeners()})();